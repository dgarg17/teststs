
<div data-sly-use.utility="${'com.cdw.aem.util.components.UtilityWCMUseHelper'}"  data-sly-test="${properties.productEDC&&properties.products}">

    <div  data-sly-use.productpicker="${'com.cdw.aem.util.components.ProductPickerWCMUseHelper' @json=properties.products}"></div>
    <input type="hidden" class="productService" id="productService-${properties.productEDC[0]}" name="productService" value="${utility.serviceDomain}/${utility.productService}?f=${properties.productEDC}">
    <input type="hidden" class="productEDC" id="productEDC-${properties.productEDC[0]}" name="productEDC" value="${properties.productEDC}">
    <input type="hidden" class id="ctaStyle-${properties.productEDC[0]}" name="ctaStyle" value="${properties.ctaStyle}">
    <input type="hidden" id="products-${properties.productEDC[0]}" class="products" name="products" value='${productpicker.updateProductPickerJson @context="scriptComment"}'>
    <input type="hidden" id="imagePosition-${properties.productEDC[0]}" class="imagePosition" name="imagePosition" value="${properties.imagePosition}">
</div>
<div id="productContainer-${properties.productEDC[0]}" class="productContainer" ></div>

<h1>New component</h1>


<script type="text/javascript">

	$.ajax({

		type: "GET", 
		dataType: "json", 
		url: "https://webdev3vhb.corp.cdw.com/api/cms/products?f=2972386,3173855,3036378,3339330,3394320", 
		success: function(response) {
			console.log(eval(response));
			alert('success!');
		}, 
		error: function(hr, txtStatus, error) {
			console.log(hr);
			//alert("error! " + txtStatus + " : " + error);
		}

	});

	$(document).ready(function() {
		var contentString;
		for (var i=0; i < products.length; i++) {
			contentString = '';
			contentString += "<div id='product-" + products[i].productCode + "'>";
			contentString += "<div class='featured-item'>";
			contentString += "<div class='small-logos'>";
			contentString += "<img alt='' src='' />"; //Image src comes from page JSON
			contentString += "</div>";
			contentString += "<div class='product-image'>";
			contentString += "<img alt='' src='" + products[i].imageUrl + "' />";
			contentString += "</div>";
			contentString += "<h6>";
			contentString += "<a href='" + products[i].url + "'>";
			contentString += products[i].name;
			contentString += "</a>";
			contentString += "</h6>";
			contentString += "<p>" + products[i].description + "</p>";
			contentString += "<div class='button-lockup'>";
			contentString += "<div class='pricing-block'>";
			contentString += "<b>" + products[i].price + "</b>";
			contentString += "<b>" + products[i].priceName + "</b>";
			contentString += "</div>";
			contentString += "<a href='" + products[i].url + "' class='btn -red'>"; //Override with pctaklink if provided
			contentString += "Buy Now"; //Comes from page JSON
			contentString += "</a>";
			contentString += "</div>";
			contentString += "</div>";
			$('.productContainer').append(contentString);
		}
		
	});


	//var products = '[{ "key1": "value1", "key2": "value2", "key3": "value3", "key4": "value4", "key5": "value5" }]';

	//var products = '[{"productCode": "2972386", "name": "HP Pro 3500 - Core i5 3470 3.2 GHz - 4 GB - 500 GB", "description": "Micro tower - 1 x Core i5 3470 / 3.2 GHz - RAM 4 GB - HDD 500 GB - DVD SuperMulti - HD Graphics 2500 - GigE - AWindows 7 Pro 64-bit / 8 Pro downgrade - pre-installed: BWindows 7 - Monitor : none - Smart Buy", "url": "/shop/products/HP-Pro-3500-Core-i5-3470-3.2-GHz-4-GB-500-GB/2972386.aspx", "imageUrl": "http://webobjects2.cdw.com/is/image/CDBW/2972386?", "brand": "Hewlett Packard Smart Buy", "productClass": "DT", "stockStatus": "In Stock", "isBStock": false, "price": "$569.99", "priceOriginal": "$569.00", "rawPrice": 569.99, "rawPriceOrginal": 569, "priceName": "Advertised Price"}, {"productCode": "3173855", "name": "Lenovo ThinkPad T440P i5-4200M 500GB HD 4GB 14\" CWin 7 Pro\r\n", "description": "Core i5 4200M / 2.5 GHz - DWindows 7 Pro 64-bit / 8 Pro 64-bit downgrade - pre-installed: EWindows 7 - 4 GB RAM - 500 GB HDD - DVD-FWriter - 14\" 1366 x 768 ( HD ) - Intel HD Graphics 4600 - GWHWAN upgradable - TopSeller", "url": "/shop/products/Lenovo-ThinkPad-T440P-i5-4200M-500GB-HD-4GB-14-quot-IWin-7-Pro/3173855.aspx", "imageUrl": "http://webobjects2.cdw.com/is/image/CDJW/3173855?", "brand": "LENOVO TOPSELLER PRODUCTS", "productClass": "NB", "stockStatus": "In Stock", "isBStock": false, "price": "$848.99", "priceOriginal": "$949.00", "rawPrice": 848.99, "rawPriceOrginal": 949, "priceName": "Advertised Price"}, {"productCode": "3036378", "name": "HP power cable - 4.6 ft", "description": "Power cable - IEC 320 EN 60320 C14 - IEC 320 EN 60320 C13 - 4.6 ft - for High Performance Cluster LC Series LC2016, LC2032, LC2064, LC2128; ProLiant DL585; Rack", "url": "/shop/products/HP-power-cable-4.6-ft/3036378.aspx", "imageUrl": "http://webobjects2.cdw.com/is/image/CDKW/3036378?", "brand": "HP 3Par Products", "productClass": "CA", "stockStatus": "Call", "isBStock": false, "price": "Call", "priceOriginal": "Call", "rawPrice": 0, "rawPriceOrginal": 0, "priceName": "Advertised Price"}, {"productCode": "3339330", "name": "ASUS ROG G750JS-DS71 - 17.3\" - Core i7 4700HQ - LWindows 8.1 64-bit - 16 GB ", "description": "Core i7 4700HQ / 2.4 GHz - MWindows 8.1 64-bit - 16 GB RAM - 1 TB HDD + 256 GB SSD - DVD-NWriter - 17.3\" 1920 x 1080 ( Full HD ) - NVIDIA GeForce GTX 870M - 802.11ac - black - with 32 GB ASUS OWebStorage", "url": "/shop/products/ASUS-ROG-G750JS-DS71-17.3-quot-Core-i7-4700HQ-PWindows-8.1-64-bit-16-GB/3339330.aspx", "imageUrl": "http://webobjects2.cdw.com/is/image/CDQW/3339330?", "brand": "Asus", "productClass": "NB", "stockStatus": "3-5 days", "isBStock": false, "price": "$1,799.99", "priceOriginal": "$1,899.00", "rawPrice": 1799.99, "rawPriceOrginal": 1899, "priceName": "Advertised Price"}, {"productCode": "3394320", "name": "Lenovo ThinkPad X131e 3372 - 11.6\" - E2-1800 - RWindows 8 Pro 64-bit / SWindo", "description": "E2-1800 1.7 GHz - TWindows 8 Pro 64-bit / UWindows 7 Pro 64-bit downgrade - pre-installed: VWindows 7 - 4 GB RAM - 320 GB HDD - 11.6\" wide 1366 x 768 / HD - AMD Radeon HD 7340 - 3G upgradable - midnight black - TopSeller", "url": "/shop/products/Lenovo-ThinkPad-X131e-3372-11.6-quot-E2-1800-XWindows-8-Pro-64-bit-YWindo/3394320.aspx", "imageUrl": "http://webobjects2.cdw.com/is/image/CDZW/2854567?", "brand": "LENOVO TOPSELLER PRODUCTS", "productClass": "NB", "stockStatus": "In Stock", "isBStock": true, "price": "$314.99", "priceOriginal": "Call", "rawPrice": 314.99, "rawPriceOrginal": 0, "priceName": "Advertised Price"} ]';
	//var obj = JSON.parse(products);

	var products = 
	[
	 {
		 "productCode": "2972386",
		 "name": "HP Pro 3500 - Core i5 3470 3.2 GHz - 4 GB - 500 GB",
		 "description": "Micro tower - 1 x Core i5 3470 / 3.2 GHz - RAM 4 GB - HDD 500 GB - DVD SuperMulti - HD Graphics 2500 - GigE - Windows 7 Pro 64-bit / 8 Pro downgrade - pre-installed: Windows 7 - Monitor : none - Smart Buy",
		 "url": "/shop/products/HP-Pro-3500-Core-i5-3470-3.2-GHz-4-GB-500-GB/2972386.aspx",
		 "imageUrl": "http://webobjects2.cdw.com/is/image/CDW/2972386?",
		 "brand": "Hewlett Packard Smart Buy",
		 "productClass": "DT",
		 "stockStatus": "In Stock",
		 "isBStock": false,
		 "price": "$569.99",
		 "priceOriginal": "$569.00",
		 "rawPrice": 569.99,
		 "rawPriceOrginal": 569,
		 "priceName": "Advertised Price"
	 },
	 {
		 "productCode": "3173855",
		 "name": "Lenovo ThinkPad T440P i5-4200M 500GB HD 4GB 14\" Win 7 Pro\r\n",
		 "description": "Core i5 4200M / 2.5 GHz - Windows 7 Pro 64-bit / 8 Pro 64-bit downgrade - pre-installed: Windows 7 - 4 GB RAM - 500 GB HDD - DVD-Writer - 14\" 1366 x 768 ( HD ) - Intel HD Graphics 4600 - WWAN upgradable - TopSeller",
		 "url": "/shop/products/Lenovo-ThinkPad-T440P-i5-4200M-500GB-HD-4GB-14-quot-Win-7-Pro/3173855.aspx",
		 "imageUrl": "http://webobjects2.cdw.com/is/image/CDW/3173855?",
		 "brand": "LENOVO TOPSELLER PRODUCTS",
		 "productClass": "NB",
		 "stockStatus": "In Stock",
		 "isBStock": false,
		 "price": "$848.99",
		 "priceOriginal": "$949.00",
		 "rawPrice": 848.99,
		 "rawPriceOrginal": 949,
		 "priceName": "Advertised Price"
	 },
	 {
		 "productCode": "3036378",
		 "name": "HP power cable - 4.6 ft",
		 "description": "Power cable - IEC 320 EN 60320 C14 - IEC 320 EN 60320 C13 - 4.6 ft - for High Performance Cluster LC Series LC2016, LC2032, LC2064, LC2128; ProLiant DL585; Rack",
		 "url": "/shop/products/HP-power-cable-4.6-ft/3036378.aspx",
		 "imageUrl": "http://webobjects2.cdw.com/is/image/CDW/3036378?",
		 "brand": "HP 3Par Products",
		 "productClass": "CA",
		 "stockStatus": "Call",
		 "isBStock": false,
		 "price": "Call",
		 "priceOriginal": "Call",
		 "rawPrice": 0,
		 "rawPriceOrginal": 0,
		 "priceName": "Advertised Price"
	 },
	 {
		 "productCode": "3339330",
		 "name": "ASUS ROG G750JS-DS71 - 17.3\" - Core i7 4700HQ - Windows 8.1 64-bit - 16 GB ",
		 "description": "Core i7 4700HQ / 2.4 GHz - Windows 8.1 64-bit - 16 GB RAM - 1 TB HDD + 256 GB SSD - DVD-Writer - 17.3\" 1920 x 1080 ( Full HD ) - NVIDIA GeForce GTX 870M - 802.11ac - black - with 32 GB ASUS WebStorage",
		 "url": "/shop/products/ASUS-ROG-G750JS-DS71-17.3-quot-Core-i7-4700HQ-Windows-8.1-64-bit-16-GB/3339330.aspx",
		 "imageUrl": "http://webobjects2.cdw.com/is/image/CDW/3339330?",
		 "brand": "Asus",
		 "productClass": "NB",
		 "stockStatus": "3-5 days",
		 "isBStock": false,
		 "price": "$1,799.99",
		 "priceOriginal": "$1,899.00",
		 "rawPrice": 1799.99,
		 "rawPriceOrginal": 1899,
		 "priceName": "Advertised Price"
	 },
	 {
		 "productCode": "3394320",
		 "name": "Lenovo ThinkPad X131e 3372 - 11.6\" - E2-1800 - Windows 8 Pro 64-bit / Windo",
		 "description": "E2-1800 1.7 GHz - Windows 8 Pro 64-bit / Windows 7 Pro 64-bit downgrade - pre-installed: Windows 7 - 4 GB RAM - 320 GB HDD - 11.6\" wide 1366 x 768 / HD - AMD Radeon HD 7340 - 3G upgradable - midnight black - TopSeller",
		 "url": "/shop/products/Lenovo-ThinkPad-X131e-3372-11.6-quot-E2-1800-Windows-8-Pro-64-bit-Windo/3394320.aspx",
		 "imageUrl": "http://webobjects2.cdw.com/is/image/CDW/2854567?",
		 "brand": "LENOVO TOPSELLER PRODUCTS",
		 "productClass": "NB",
		 "stockStatus": "In Stock",
		 "isBStock": true,
		 "price": "$314.99",
		 "priceOriginal": "Call",
		 "rawPrice": 314.99,
		 "rawPriceOrginal": 0,
		 "priceName": "Advertised Price"
	 }
	];

	//console.log(products);

</script>
